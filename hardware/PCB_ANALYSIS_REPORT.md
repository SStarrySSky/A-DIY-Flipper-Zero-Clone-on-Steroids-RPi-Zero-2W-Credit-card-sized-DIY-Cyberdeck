# PwnZero PCB 设计分析报告

## 日期: 2026-01-18

## 1. BOM物料检查 ✅

所有20个元器件都已包含在PCB中：
- ✅ U1: Pi Zero 2W (40针排母 J1)
- ✅ U2: CC1101 TX
- ✅ U3: CC1101 RX
- ✅ U4: PN532 NFC
- ✅ U5: OLED SH1106
- ✅ U6: VS1838B IR接收
- ✅ SW1: 5向摇杆
- ✅ D1-D4: 4个LED
- ✅ R1-R4: 4个330Ω电阻
- ✅ C1-C4: 4个滤波电容

## 2. 关键设计错误 ❌

### 2.1 LED电路连接错误

**当前错误设计:**
```
GPIO → R1 → ??? (悬空)
D1 阳极 → ??? (悬空)
D1 阴极 → GND
```

**正确设计应该是:**
```
GPIO → R1 → LED阳极(+) → LED阴极(-) → GND
```

**问题根源:**
- 电阻R1-R4的pad 2原本连接到net 0（悬空）
- LED的pad 1（阳极）也连接到net 0（悬空）
- 需要创建中间网络连接电阻和LED

### 2.2 滤波电容连接不完整

**当前设计:**
```
C1 pad1 → +3V3
C1 pad2 → GND ✅
C2 pad1 → +3V3
C2 pad2 → GND ✅
```

这个实际上是正确的，但需要确保电容物理位置靠近CC1101模块。

### 2.3 缺失的GPIO网络

**已修复:** ✅
- net 16: GPIO17_JOY_UP
- net 17: GPIO27_JOY_DOWN
- net 18: GPIO22_JOY_LEFT
- net 19: GPIO23_JOY_RIGHT
- net 20: GPIO24_JOY_CENTER

### 2.4 缺失的走线

需要添加的走线：
- [ ] 摇杆5个GPIO到Pi Zero的连接
- [ ] 电阻到LED的中间网络走线
- [ ] 层间过孔（vias）

## 3. 修复方案

### 方案A: 添加中间网络（推荐）

为每个LED电路添加中间网络：
```
net 21 "LED_IR_ANODE"     - 连接R1 pad2 和 D1 pad1
net 22 "LED_RED_ANODE"    - 连接R2 pad2 和 D2 pad1
net 23 "LED_YELLOW_ANODE" - 连接R3 pad2 和 D3 pad1
net 24 "LED_GREEN_ANODE"  - 连接R4 pad2 和 D4 pad1
```

### 方案B: 直接连接到GND（错误）

这会导致LED始终亮起，无法控制。❌

## 4. 走线优化建议

### 4.1 电源走线
- +3V3: 0.5mm → 0.6mm（增加载流能力）
- +5V: 0.6mm → 0.8mm（PN532需要较大电流）
- GND: 铺铜 ✅

### 4.2 信号走线
- I2C (SDA/SCL): 0.3mm ✅
- SPI (MOSI/MISO/SCLK): 0.3mm ✅
- GPIO: 0.25mm ✅

### 4.3 过孔设计
需要添加过孔用于：
- 顶层LED连接到底层GPIO
- 顶层摇杆连接到底层GPIO
- 电源分配

## 5. 下一步行动

1. ✅ 添加GPIO网络定义
2. ✅ 修复摇杆连接
3. ⏳ 添加LED中间网络
4. ⏳ 修复电阻和LED连接
5. ⏳ 添加摇杆GPIO走线
6. ⏳ 添加过孔
7. ⏳ 优化走线布局
8. ⏳ 生成DRC报告

## 6. 电路仿真计划

### 6.1 LED电路仿真
- 输入: GPIO 3.3V
- 电阻: 330Ω
- LED正向压降: ~2V (红/黄/绿), ~1.2V (IR)
- 预期电流: (3.3V - 2V) / 330Ω ≈ 4mA ✅

### 6.2 滤波电路仿真
- C1 (10uF) + C2 (100nF) 并联
- 截止频率: ~160Hz (低频) + ~16kHz (高频)
- 适用于CC1101的433MHz工作频率 ✅

### 6.3 I2C总线仿真
- 上拉电阻: Pi Zero内置
- 总线电容: 需要测量
- 最大速率: 400kHz (Fast Mode) ✅

## 7. 制造可行性

### 7.1 PCB参数
- 尺寸: 85.6 x 53.98mm ✅
- 层数: 2层 ✅
- 最小线宽: 0.25mm ✅ (嘉立创支持0.2mm)
- 最小间距: 0.2mm ✅

### 7.2 元器件可焊性
- SMD 0805: ✅ 手工焊接可行
- 邮票孔模块: ✅ 直焊可行
- THT LED: ✅ 标准5mm封装
- 排母: ✅ 2.54mm标准间距

## 8. 总结

**当前完成度: 70%**

**主要问题:**
1. LED电路连接逻辑错误（严重）
2. 缺少摇杆GPIO走线
3. 缺少层间过孔

**预计修复时间:**
- 添加中间网络: 5分钟
- 修复所有连接: 10分钟
- 添加走线和过孔: 15分钟
- 优化和仿真: 20分钟

**总计: 约50分钟可完成完整PCB设计**
